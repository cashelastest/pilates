# Система управління студією пілатесу: простими словами

## Що вміє система?

### 1. Зручний календар занять
Електронний календар, де видно всі заняття на день, тиждень або місяць. Тренери та адміністратори можуть:
- Додавати нові заняття просто клікнувши на потрібний час
- Переносити заняття перетягуванням мишкою
- Змінювати тривалість занять, розтягуючи їх
- Бачити статус занять різними кольорами (заплановане, проведене, скасоване)

### 2. Робота з клієнтами
У системі зберігається вся важлива інформація про клієнтів:
- Особисті дані (ім'я, контакти, дата народження)
- Залишок коштів на рахунку
<!-- - Призначений тренер та група -->
- Історія відвіданих занять
- Активні абонементи та їхній стан

Клієнт може зайти у свій особистий кабінет і переглянути цю інформацію самостійно.

### 3. Управління абонементами
Система дозволяє створювати різні типи абонементів:
- Встановлювати ціну та кількість занять
- Визначати термін дії
- Призначати розклад (наприклад, щопонеділка та щосереди о 18:00)
- Відстежувати, скільки занять вже використано

### 4. Організація роботи тренерів
Для кожного тренера доступні функції:
- Перегляд особистого розкладу занять
- Список закріплених клієнтів і груп
- Можливість відмітити відсутність (хвороба, відпустка)

## Як це працює?

Уся система складається з двох основних частин:

### Частина 1: Серверна програма (бекенд)
Це "мозок" системи, який працює на вашому сервері. Він:
- Зберігає всі дані у спеціальній базі даних
- Обробляє запити від користувачів (додавання занять, перевірка балансу тощо)
- Забезпечує захист інформації
- Слідкує за правильністю всіх дій

### Частина 2: Веб-інтерфейс (фронтенд)
Це те, що бачать користувачі у своєму браузері:
- Зручні сторінки для входу
- Календар занять
- Картки клієнтів і тренерів
- Форми для додавання нової інформації

## Основні сутності системи

У системі є кілька ключових елементів, з якими вона працює:

### 1. Клієнти
Для кожного клієнта зберігається:
- Ім'я та прізвище
- Логін і пароль для входу
- Електронна пошта
- Баланс коштів
- Стать і дата народження
- Опис (особливості здоров'я, побажання)
- Дата реєстрації

### 2. Тренери
Для кожного тренера є:
- Ім'я та професійна інформація
- Спеціалізація (позиція)
- Розклад роботи
- Список клієнтів
- Групи, з якими працює тренер

### 3. Заняття
Кожне заняття включає:
- Дату і час початку та закінчення
- Призначеного тренера
- Клієнта або групу
- Вартість
- Прив'язку до абонемента (якщо є)
- Статус (заплановане, проведене, скасоване)

### 4. Абонементи
Для абонементів зберігається:
- Назва та опис
- Ціна
- Загальна кількість занять
- Термін дії
- Розклад занять (якщо регулярний)

### 5. Групи
Групові заняття мають:
- Назву групи
- Призначеного тренера
- Список учасників (клієнтів)

## Практичні сценарії використання

### Сценарій 1: Новий клієнт
1. Адміністратор додає нового клієнта в систему, вносячи його дані
2. Призначає йому тренера і групу
3. Оформлює абонемент, вносячи оплату на баланс
4. Створює регулярний розклад занять або окремі заняття

### Сценарій 2: Перенесення заняття
1. Тренер або клієнт просить перенести заняття
2. Адміністратор відкриває календар і просто перетягує заняття на новий час
3. Система автоматично оновлює інформацію для всіх учасників

### Сценарій 3: Контроль абонементів
1. Клієнт приходить на заняття
2. Система автоматично відзначає, що заняття проведено
3. Зменшується кількість доступних занять в абонементі
4. Коли заняття закінчуються, система сповіщає про необхідність продовжити абонемент

## Технологія WebSockets: швидкодія та ефективність

Система використовує технологію WebSockets для комунікації між сервером та користувачами. На відміну від звичайних HTTP-запитів, які створюють нове з'єднання для кожного запиту, WebSockets встановлюють постійне з'єднання, через яке дані передаються миттєво в обох напрямках.

Це забезпечує:
- Миттєве оновлення календаря занять для всіх користувачів
- Відсутність затримок при перетягуванні та зміні розкладу
- Можливість системі самостійно надсилати повідомлення клієнтам без додаткових запитів
- Значне зменшення навантаження на сервер при великій кількості одночасних користувачів
- Ефективну роботу навіть при слабкому інтернет-з'єднанні

У файлі socket.py реалізовано маршрутизацію всіх запитів через WebSockets. Система використовує спеціальні коди для різних типів операцій, що робить обробку даних надзвичайно швидкою та ефективною.

Головний маршрутизатор WebSocket запитів здатний обробляти десятки різних типів операцій, включаючи отримання даних клієнта, зміну розкладу занять, створення нових абонементів та багато іншого - все це відбувається за лічені мілісекунди.